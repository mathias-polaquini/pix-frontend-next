generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id           Int       @id @default(autoincrement())
  cpf_cnpj     String    @unique @map("cpf_cnpj")
  nome         String
  telefone     String?
  rua          String?
  bairro       String?
  cidade       String?
  numero_conta Int       @map("numero_conta")
  email        String    @unique
  senha        String

  chaves       Chave[]
  transacoes   Transacao[]
}

model Chave {
  chave      String    @id
  tipo       String
  usuarioId  Int       @map("usuario_id")

  usuario    Usuario   @relation(fields: [usuarioId], references: [id])
  origem     Transacao[] @relation("origemRelation")
  destino    Transacao[] @relation("destinoRelation")
}

model Transacao {
  id                 Int      @id @default(autoincrement())
  chaveOrigem        String
  chaveDestino       String
  data_transferencia DateTime @default(now())
  valor              Decimal   @db.Decimal(10, 2)
  mensagem           String?
  usuarioId          Int
  usuario            Usuario @relation(fields: [usuarioId], references: [id])
}
